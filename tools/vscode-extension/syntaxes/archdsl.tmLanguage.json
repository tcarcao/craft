{
    "scopeName": "source.archdsl",
    "patterns": [
        { "include": "#comments" },
        { "include": "#structural-keywords" },
        { "include": "#domain-keywords" },
        { "include": "#relationship-keywords" },
        { "include": "#ddd-patterns" },
        { "include": "#technologies" },
        { "include": "#platforms" },
        { "include": "#service-interactions" },
        { "include": "#identifiers" }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "name": "comment.line.double-slash.archdsl",
                    "match": "//.*$"
                },
                {
                    "name": "comment.block.archdsl",
                    "begin": "/\\*",
                    "end": "\\*/",
                    "captures": {
                        "0": { "name": "punctuation.definition.comment.archdsl" }
                    }
                }
            ]
        },
        "structural-keywords": {
            "patterns": [{
                "name": "keyword.control.structure.archdsl",
                "match": "\\b(system|bounded|context)\\b"
            }]
        },
        "domain-keywords": {
            "patterns": [{
                "name": "keyword.control.domain.archdsl",
                "match": "\\b(aggregate|component|service|event)\\b"
            }]
        },
        "relationship-keywords": {
            "patterns": [{
                "name": "keyword.control.relation.archdsl",
                "match": "\\b(using|on|to|as)\\b"
            }]
        },
        "ddd-patterns": {
            "patterns": [{
                "name": "keyword.other.ddd.archdsl",
                "match": "\\b(upstream|downstream|acl|ohs|conformist)\\b"
            }]
        },
        "technologies": {
            "patterns": [{
                "name": "support.type.tech.archdsl",
                "match": "\\b(go|java|python|nodejs|php)\\b"
            }]
        },
        "platforms": {
            "patterns": [{
                "name": "support.type.platform.archdsl",
                "match": "\\b(eks|lambda|sqs|sns|dynamodb|redis)\\b"
            }]
        },
        "identifiers": {
            "patterns": [
                {
                    "name": "entity.name.type.archdsl",
                    "match": "\\b[A-Z][a-zA-Z0-9]*\\b"
                },
                {
                    "name": "entity.name.function.archdsl",
                    "match": "\\b[a-z][a-zA-Z0-9]*\\b"
                }
            ]
        },
        "service-interactions": {
            "patterns": [
                {
                    "match": "([A-Za-z][A-Za-z0-9]*)\\.(\\w+)\\s*\\(([^)]*)\\)\\s*(->)?\\s*([A-Za-z][A-Za-z0-9]*)?\\.?(\\w+)?",
                    "captures": {
                        "1": { "name": "entity.name.class.service.archdsl" },  
                        "2": { "name": "entity.name.function.method.archdsl" },
                        "3": { "name": "variable.parameter.archdsl" },         
                        "4": { "name": "keyword.operator.arrow.archdsl" },     
                        "5": { "name": "entity.name.class.target.archdsl" },   
                        "6": { "name": "entity.name.function.target.archdsl" } 
                    }
                }
            ]
        }
    }
}